import { Injectable } from '@angular/core';
import { LogLevel } from './log-level';
import * as i0 from "@angular/core";
import * as i1 from "./abstract-logger.service";
class LoggerService {
    constructor(abstractLoggerService) {
        this.abstractLoggerService = abstractLoggerService;
    }
    logError(configuration, message, ...args) {
        if (this.loggingIsTurnedOff(configuration)) {
            return;
        }
        const { configId } = configuration;
        const messageToLog = this.isObject(message)
            ? JSON.stringify(message)
            : message;
        if (!!args && !!args.length) {
            this.abstractLoggerService.logError(`[ERROR] ${configId} - ${messageToLog}`, ...args);
        }
        else {
            this.abstractLoggerService.logError(`[ERROR] ${configId} - ${messageToLog}`);
        }
    }
    logWarning(configuration, message, ...args) {
        if (!this.logLevelIsSet(configuration)) {
            return;
        }
        if (this.loggingIsTurnedOff(configuration)) {
            return;
        }
        if (!this.currentLogLevelIsEqualOrSmallerThan(configuration, LogLevel.Warn)) {
            return;
        }
        const { configId } = configuration;
        const messageToLog = this.isObject(message)
            ? JSON.stringify(message)
            : message;
        if (!!args && !!args.length) {
            this.abstractLoggerService.logWarning(`[WARN] ${configId} - ${messageToLog}`, ...args);
        }
        else {
            this.abstractLoggerService.logWarning(`[WARN] ${configId} - ${messageToLog}`);
        }
    }
    logDebug(configuration, message, ...args) {
        if (!this.logLevelIsSet(configuration)) {
            return;
        }
        if (this.loggingIsTurnedOff(configuration)) {
            return;
        }
        if (!this.currentLogLevelIsEqualOrSmallerThan(configuration, LogLevel.Debug)) {
            return;
        }
        const { configId } = configuration;
        const messageToLog = this.isObject(message)
            ? JSON.stringify(message)
            : message;
        if (!!args && !!args.length) {
            this.abstractLoggerService.logDebug(`[DEBUG] ${configId} - ${messageToLog}`, ...args);
        }
        else {
            this.abstractLoggerService.logDebug(`[DEBUG] ${configId} - ${messageToLog}`);
        }
    }
    currentLogLevelIsEqualOrSmallerThan(configuration, logLevelToCompare) {
        const { logLevel } = configuration || {};
        return logLevel <= logLevelToCompare;
    }
    logLevelIsSet(configuration) {
        const { logLevel } = configuration || {};
        if (logLevel === null) {
            return false;
        }
        return logLevel !== undefined;
    }
    loggingIsTurnedOff(configuration) {
        const { logLevel } = configuration || {};
        return logLevel === LogLevel.None;
    }
    isObject(possibleObject) {
        return Object.prototype.toString.call(possibleObject) === '[object Object]';
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.0.2", ngImport: i0, type: LoggerService, deps: [{ token: i1.AbstractLoggerService }], target: i0.ɵɵFactoryTarget.Injectable }); }
    static { this.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: "12.0.0", version: "16.0.2", ngImport: i0, type: LoggerService, providedIn: 'root' }); }
}
export { LoggerService };
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.0.2", ngImport: i0, type: LoggerService, decorators: [{
            type: Injectable,
            args: [{ providedIn: 'root' }]
        }], ctorParameters: function () { return [{ type: i1.AbstractLoggerService }]; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibG9nZ2VyLnNlcnZpY2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9hbmd1bGFyLWF1dGgtb2lkYy1jbGllbnQvc3JjL2xpYi9sb2dnaW5nL2xvZ2dlci5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFHM0MsT0FBTyxFQUFFLFFBQVEsRUFBRSxNQUFNLGFBQWEsQ0FBQzs7O0FBRXZDLE1BQ2EsYUFBYTtJQUN4QixZQUE2QixxQkFBNEM7UUFBNUMsMEJBQXFCLEdBQXJCLHFCQUFxQixDQUF1QjtJQUFHLENBQUM7SUFFN0UsUUFBUSxDQUNOLGFBQWtDLEVBQ2xDLE9BQVksRUFDWixHQUFHLElBQVc7UUFFZCxJQUFJLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxhQUFhLENBQUMsRUFBRTtZQUMxQyxPQUFPO1NBQ1I7UUFFRCxNQUFNLEVBQUUsUUFBUSxFQUFFLEdBQUcsYUFBYSxDQUFDO1FBQ25DLE1BQU0sWUFBWSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDO1lBQ3pDLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQztZQUN6QixDQUFDLENBQUMsT0FBTyxDQUFDO1FBRVosSUFBSSxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFO1lBQzNCLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxRQUFRLENBQ2pDLFdBQVcsUUFBUSxNQUFNLFlBQVksRUFBRSxFQUN2QyxHQUFHLElBQUksQ0FDUixDQUFDO1NBQ0g7YUFBTTtZQUNMLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxRQUFRLENBQ2pDLFdBQVcsUUFBUSxNQUFNLFlBQVksRUFBRSxDQUN4QyxDQUFDO1NBQ0g7SUFDSCxDQUFDO0lBRUQsVUFBVSxDQUNSLGFBQWtDLEVBQ2xDLE9BQVksRUFDWixHQUFH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LElBQUksQ0FBQyxjQUFjLENBQUMsS0FBSyxpQkFBaUIsQ0FBQztJQUM5RSxDQUFDOzhHQWhJVSxhQUFhO2tIQUFiLGFBQWEsY0FEQSxNQUFNOztTQUNuQixhQUFhOzJGQUFiLGFBQWE7a0JBRHpCLFVBQVU7bUJBQUMsRUFBRSxVQUFVLEVBQUUsTUFBTSxFQUFFIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgT3BlbklkQ29uZmlndXJhdGlvbiB9IGZyb20gJy4uL2NvbmZpZy9vcGVuaWQtY29uZmlndXJhdGlvbic7XG5pbXBvcnQgeyBBYnN0cmFjdExvZ2dlclNlcnZpY2UgfSBmcm9tICcuL2Fic3RyYWN0LWxvZ2dlci5zZXJ2aWNlJztcbmltcG9ydCB7IExvZ0xldmVsIH0gZnJvbSAnLi9sb2ctbGV2ZWwnO1xuXG5ASW5qZWN0YWJsZSh7IHByb3ZpZGVkSW46ICdyb290JyB9KVxuZXhwb3J0IGNsYXNzIExvZ2dlclNlcnZpY2Uge1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHJlYWRvbmx5IGFic3RyYWN0TG9nZ2VyU2VydmljZTogQWJzdHJhY3RMb2dnZXJTZXJ2aWNlKSB7fVxuXG4gIGxvZ0Vycm9yKFxuICAgIGNvbmZpZ3VyYXRpb246IE9wZW5JZENvbmZpZ3VyYXRpb24sXG4gICAgbWVzc2FnZTogYW55LFxuICAgIC4uLmFyZ3M6IGFueVtdXG4gICk6IHZvaWQge1xuICAgIGlmICh0aGlzLmxvZ2dpbmdJc1R1cm5lZE9mZihjb25maWd1cmF0aW9uKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHsgY29uZmlnSWQgfSA9IGNvbmZpZ3VyYXRpb247XG4gICAgY29uc3QgbWVzc2FnZVRvTG9nID0gdGhpcy5pc09iamVjdChtZXNzYWdlKVxuICAgICAgPyBKU09OLnN0cmluZ2lmeShtZXNzYWdlKVxuICAgICAgOiBtZXNzYWdlO1xuXG4gICAgaWYgKCEhYXJncyAmJiAhIWFyZ3MubGVuZ3RoKSB7XG4gICAgICB0aGlzLmFic3RyYWN0TG9nZ2VyU2VydmljZS5sb2dFcnJvcihcbiAgICAgICAgYFtFUlJPUl0gJHtjb25maWdJZH0gLSAke21lc3NhZ2VUb0xvZ31gLFxuICAgICAgICAuLi5hcmdzXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmFic3RyYWN0TG9nZ2VyU2VydmljZS5sb2dFcnJvcihcbiAgICAgICAgYFtFUlJPUl0gJHtjb25maWdJZH0gLSAke21lc3NhZ2VUb0xvZ31gXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIGxvZ1dhcm5pbmcoXG4gICAgY29uZmlndXJhdGlvbjogT3BlbklkQ29uZmlndXJhdGlvbixcbiAgICBtZXNzYWdlOiBhbnksXG4gICAgLi4uYXJnczogYW55W11cbiAgKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmxvZ0xldmVsSXNTZXQoY29uZmlndXJhdGlvbikpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5sb2dnaW5nSXNUdXJuZWRPZmYoY29uZmlndXJhdGlvbikpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICAhdGhpcy5jdXJyZW50TG9nTGV2ZWxJc0VxdWFsT3JTbWFsbGVyVGhhbihjb25maWd1cmF0aW9uLCBMb2dMZXZlbC5XYXJuKVxuICAgICkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHsgY29uZmlnSWQgfSA9IGNvbmZpZ3VyYXRpb247XG4gICAgY29uc3QgbWVzc2FnZVRvTG9nID0gdGhpcy5pc09iamVjdChtZXNzYWdlKVxuICAgICAgPyBKU09OLnN0cmluZ2lmeShtZXNzYWdlKVxuICAgICAgOiBtZXNzYWdlO1xuXG4gICAgaWYgKCEhYXJncyAmJiAhIWFyZ3MubGVuZ3RoKSB7XG4gICAgICB0aGlzLmFic3RyYWN0TG9nZ2VyU2VydmljZS5sb2dXYXJuaW5nKFxuICAgICAgICBgW1dBUk5dICR7Y29uZmlnSWR9IC0gJHttZXNzYWdlVG9Mb2d9YCxcbiAgICAgICAgLi4uYXJnc1xuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5hYnN0cmFjdExvZ2dlclNlcnZpY2UubG9nV2FybmluZyhcbiAgICAgICAgYFtXQVJOXSAke2NvbmZpZ0lkfSAtICR7bWVzc2FnZVRvTG9nfWBcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgbG9nRGVidWcoXG4gICAgY29uZmlndXJhdGlvbjogT3BlbklkQ29uZmlndXJhdGlvbixcbiAgICBtZXNzYWdlOiBhbnksXG4gICAgLi4uYXJnczogYW55W11cbiAgKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmxvZ0xldmVsSXNTZXQoY29uZmlndXJhdGlvbikpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5sb2dnaW5nSXNUdXJuZWRPZmYoY29uZmlndXJhdGlvbikpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICAhdGhpcy5jdXJyZW50TG9nTGV2ZWxJc0VxdWFsT3JTbWFsbGVyVGhhbihjb25maWd1cmF0aW9uLCBMb2dMZXZlbC5EZWJ1ZylcbiAgICApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB7IGNvbmZpZ0lkIH0gPSBjb25maWd1cmF0aW9uO1xuICAgIGNvbnN0IG1lc3NhZ2VUb0xvZyA9IHRoaXMuaXNPYmplY3QobWVzc2FnZSlcbiAgICAgID8gSlNPTi5zdHJpbmdpZnkobWVzc2FnZSlcbiAgICAgIDogbWVzc2FnZTtcblxuICAgIGlmICghIWFyZ3MgJiYgISFhcmdzLmxlbmd0aCkge1xuICAgICAgdGhpcy5hYnN0cmFjdExvZ2dlclNlcnZpY2UubG9nRGVidWcoXG4gICAgICAgIGBbREVCVUddICR7Y29uZmlnSWR9IC0gJHttZXNzYWdlVG9Mb2d9YCxcbiAgICAgICAgLi4uYXJnc1xuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5hYnN0cmFjdExvZ2dlclNlcnZpY2UubG9nRGVidWcoXG4gICAgICAgIGBbREVCVUddICR7Y29uZmlnSWR9IC0gJHttZXNzYWdlVG9Mb2d9YFxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGN1cnJlbnRMb2dMZXZlbElzRXF1YWxPclNtYWxsZXJUaGFuKFxuICAgIGNvbmZpZ3VyYXRpb246IE9wZW5JZENvbmZpZ3VyYXRpb24sXG4gICAgbG9nTGV2ZWxUb0NvbXBhcmU6IExvZ0xldmVsXG4gICk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHsgbG9nTGV2ZWwgfSA9IGNvbmZpZ3VyYXRpb24gfHwge307XG5cbiAgICByZXR1cm4gbG9nTGV2ZWwgPD0gbG9nTGV2ZWxUb0NvbXBhcmU7XG4gIH1cblxuICBwcml2YXRlIGxvZ0xldmVsSXNTZXQoY29uZmlndXJhdGlvbjogT3BlbklkQ29uZmlndXJhdGlvbik6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHsgbG9nTGV2ZWwgfSA9IGNvbmZpZ3VyYXRpb24gfHwge307XG5cbiAgICBpZiAobG9nTGV2ZWwgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gbG9nTGV2ZWwgIT09IHVuZGVmaW5lZDtcbiAgfVxuXG4gIHByaXZhdGUgbG9nZ2luZ0lzVHVybmVkT2ZmKGNvbmZpZ3VyYXRpb246IE9wZW5JZENvbmZpZ3VyYXRpb24pOiBib29sZWFuIHtcbiAgICBjb25zdCB7IGxvZ0xldmVsIH0gPSBjb25maWd1cmF0aW9uIHx8IHt9O1xuXG4gICAgcmV0dXJuIGxvZ0xldmVsID09PSBMb2dMZXZlbC5Ob25lO1xuICB9XG5cbiAgcHJpdmF0ZSBpc09iamVjdChwb3NzaWJsZU9iamVjdDogYW55KTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChwb3NzaWJsZU9iamVjdCkgPT09ICdbb2JqZWN0IE9iamVjdF0nO1xuICB9XG59XG4iXX0=