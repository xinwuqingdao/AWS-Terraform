import { POSITIVE_VALIDATION_RESULT } from '../rule';
const createIdentifierToCheck = (passedConfig) => {
    if (!passedConfig) {
        return null;
    }
    const { authority, clientId, scope } = passedConfig;
    return `${authority}${clientId}${scope}`;
};
const arrayHasDuplicates = (array) => new Set(array).size !== array.length;
export const ensureNoDuplicatedConfigsRule = (passedConfigs) => {
    const allIdentifiers = passedConfigs.map((x) => createIdentifierToCheck(x));
    const someAreNull = allIdentifiers.some((x) => x === null);
    if (someAreNull) {
        return {
            result: false,
            messages: [
                `Please make sure you add an object with a 'config' property: ....({ config }) instead of ...(config)`,
            ],
            level: 'error',
        };
    }
    const hasDuplicates = arrayHasDuplicates(allIdentifiers);
    if (hasDuplicates) {
        return {
            result: false,
            messages: [
                'You added multiple configs with the same authority, clientId and scope',
            ],
            level: 'warning',
        };
    }
    return POSITIVE_VALIDATION_RESULT;
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZW5zdXJlLW5vLWR1cGxpY2F0ZWQtY29uZmlncy5ydWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvYW5ndWxhci1hdXRoLW9pZGMtY2xpZW50L3NyYy9saWIvY29uZmlnL3ZhbGlkYXRpb24vcnVsZXMvZW5zdXJlLW5vLWR1cGxpY2F0ZWQtY29uZmlncy5ydWxlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLE9BQU8sRUFBRSwwQkFBMEIsRUFBd0IsTUFBTSxTQUFTLENBQUM7QUFFM0UsTUFBTSx1QkFBdUIsR0FBRyxDQUFDLFlBQWlDLEVBQVUsRUFBRTtJQUM1RSxJQUFJLENBQUMsWUFBWSxFQUFFO1FBQ2pCLE9BQU8sSUFBSSxDQUFDO0tBQ2I7SUFFRCxNQUFNLEVBQUUsU0FBUyxFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQUUsR0FBRyxZQUFZLENBQUM7SUFFcEQsT0FBTyxHQUFHLFNBQVMsR0FBRyxRQUFRLEdBQUcsS0FBSyxFQUFFLENBQUM7QUFDM0MsQ0FBQyxDQUFDO0FBRUYsTUFBTSxrQkFBa0IsR0FBRyxDQUFDLEtBQWUsRUFBVyxFQUFFLENBQ3RELElBQUksR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksS0FBSyxLQUFLLENBQUMsTUFBTSxDQUFDO0FBRXZDLE1BQU0sQ0FBQyxNQUFNLDZCQUE2QixHQUFHLENBQzNDLGFBQW9DLEVBQ2QsRUFBRTtJQUN4QixNQUFNLGNBQWMsR0FBRyxhQUFhLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBRTVFLE1BQU0sV0FBVyxHQUFHLGNBQWMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsS0FBSyxJQUFJLENBQUMsQ0FBQztJQUUzRCxJQUFJLFdBQVcsRUFBRTtRQUNmLE9BQU87WUFDTCxNQUFNLEVBQUUsS0FBSztZQUNiLFFBQVEsRUFBRTtnQkFDUixzR0FBc0c7YUFDdkc7WUFDRCxLQUFLLEVBQUUsT0FBTztTQUNmLENBQUM7S0FDSDtJQUVELE1BQU0sYUFBYSxHQUFHLGtCQUFrQixDQUFDLGNBQWMsQ0FBQyxDQUFDO0lBRXpELElBQUksYUFBYSxFQUFFO1FBQ2pCLE9BQU87WUFDTCxNQUFNLEVBQUUsS0FBSztZQUNiLFFBQVEsRUFBRTtnQkFDUix3RUFBd0U7YUFDekU7WUFDRCxLQUFLLEVBQUUsU0FBUztTQUNqQixDQUFDO0tBQ0g7SUFFRCxPQUFPLDBCQUEwQixDQUFDO0FBQ3BDLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE9wZW5JZENvbmZpZ3VyYXRpb24gfSBmcm9tICcuLi8uLi9vcGVuaWQtY29uZmlndXJhdGlvbic7XG5pbXBvcnQgeyBQT1NJVElWRV9WQUxJREFUSU9OX1JFU1VMVCwgUnVsZVZhbGlkYXRpb25SZXN1bHQgfSBmcm9tICcuLi9ydWxlJztcblxuY29uc3QgY3JlYXRlSWRlbnRpZmllclRvQ2hlY2sgPSAocGFzc2VkQ29uZmlnOiBPcGVuSWRDb25maWd1cmF0aW9uKTogc3RyaW5nID0+IHtcbiAgaWYgKCFwYXNzZWRDb25maWcpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGNvbnN0IHsgYXV0aG9yaXR5LCBjbGllbnRJZCwgc2NvcGUgfSA9IHBhc3NlZENvbmZpZztcblxuICByZXR1cm4gYCR7YXV0aG9yaXR5fSR7Y2xpZW50SWR9JHtzY29wZX1gO1xufTtcblxuY29uc3QgYXJyYXlIYXNEdXBsaWNhdGVzID0gKGFycmF5OiBzdHJpbmdbXSk6IGJvb2xlYW4gPT5cbiAgbmV3IFNldChhcnJheSkuc2l6ZSAhPT0gYXJyYXkubGVuZ3RoO1xuXG5leHBvcnQgY29uc3QgZW5zdXJlTm9EdXBsaWNhdGVkQ29uZmlnc1J1bGUgPSAoXG4gIHBhc3NlZENvbmZpZ3M6IE9wZW5JZENvbmZpZ3VyYXRpb25bXVxuKTogUnVsZVZhbGlkYXRpb25SZXN1bHQgPT4ge1xuICBjb25zdCBhbGxJZGVudGlmaWVycyA9IHBhc3NlZENvbmZpZ3MubWFwKCh4KSA9PiBjcmVhdGVJZGVudGlmaWVyVG9DaGVjayh4KSk7XG5cbiAgY29uc3Qgc29tZUFyZU51bGwgPSBhbGxJZGVudGlmaWVycy5zb21lKCh4KSA9PiB4ID09PSBudWxsKTtcblxuICBpZiAoc29tZUFyZU51bGwpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVzdWx0OiBmYWxzZSxcbiAgICAgIG1lc3NhZ2VzOiBbXG4gICAgICAgIGBQbGVhc2UgbWFrZSBzdXJlIHlvdSBhZGQgYW4gb2JqZWN0IHdpdGggYSAnY29uZmlnJyBwcm9wZXJ0eTogLi4uLih7IGNvbmZpZyB9KSBpbnN0ZWFkIG9mIC4uLihjb25maWcpYCxcbiAgICAgIF0sXG4gICAgICBsZXZlbDogJ2Vycm9yJyxcbiAgICB9O1xuICB9XG5cbiAgY29uc3QgaGFzRHVwbGljYXRlcyA9IGFycmF5SGFzRHVwbGljYXRlcyhhbGxJZGVudGlmaWVycyk7XG5cbiAgaWYgKGhhc0R1cGxpY2F0ZXMpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVzdWx0OiBmYWxzZSxcbiAgICAgIG1lc3NhZ2VzOiBbXG4gICAgICAgICdZb3UgYWRkZWQgbXVsdGlwbGUgY29uZmlncyB3aXRoIHRoZSBzYW1lIGF1dGhvcml0eSwgY2xpZW50SWQgYW5kIHNjb3BlJyxcbiAgICAgIF0sXG4gICAgICBsZXZlbDogJ3dhcm5pbmcnLFxuICAgIH07XG4gIH1cblxuICByZXR1cm4gUE9TSVRJVkVfVkFMSURBVElPTl9SRVNVTFQ7XG59O1xuIl19